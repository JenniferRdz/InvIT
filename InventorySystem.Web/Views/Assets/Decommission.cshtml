@model InventorySystem.Web.Controllers.AssetsController.AssetDecommissionVM

@{
    ViewData["Title"] = "Dar de baja equipo";
}

<div class="container mt-4">
    <h3 class="mb-3">Dar de baja equipo</h3>

    <div class="alert alert-warning">
        <strong>Atención:</strong> Esta acción marcará el equipo como <b>Baja</b> en el inventario,
        pero no eliminará su historial ni sus mantenimientos.
    </div>

    <dl class="row">
        <dt class="col-sm-3">Tag</dt>
        <dd class="col-sm-9">@Model.AssetTag</dd>

        <dt class="col-sm-3">Tipo</dt>
        <dd class="col-sm-9">@Model.Tipo</dd>

        <dt class="col-sm-3">Marca / Modelo</dt>
        <dd class="col-sm-9">@Model.Marca @Model.Modelo</dd>

        <dt class="col-sm-3">Serie</dt>
        <dd class="col-sm-9">@Model.Serie</dd>

        <dt class="col-sm-3">Ubicación</dt>
        <dd class="col-sm-9">@Model.Ubicacion</dd>

        <dt class="col-sm-3">Responsable</dt>
        <dd class="col-sm-9">@Model.Responsable</dd>
    </dl>

    <form asp-action="Decommission" method="post" class="mt-3">
        <input type="hidden" asp-for="AssetId" />

        <div class="mb-3">
            <label asp-for="ReasonId" class="form-label">Motivo de baja</label>
            <select asp-for="ReasonId" class="form-select">
                <option value="">Seleccione motivo...</option>
                @foreach (var r in (Model.Reasons ?? Enumerable.Empty<InventorySystem.Web.Data.Entities.DecommissionReason>()))
                {
                <option value="@r.ReasonId">@r.Name</option>
                }
            </select>
            <span asp-validation-for="ReasonId" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label class="form-label" for="fechaBajaInput">Fecha de baja</label>
            <input id="fechaBajaInput"
                   name="FechaBaja"
                   type="date"
                   class="form-control"
                   value="@(Model.FechaBaja.HasValue ? Model.FechaBaja.Value.ToString("yyyy-MM-dd") : (Model.FechaSugerida.HasValue ? Model.FechaSugerida.Value.ToString("yyyy-MM-dd") : ""))" />
        </div>

        <button type="submit" class="btn btn-danger">Confirmar baja</button>
        <a asp-action="Index" class="btn btn-secondary ms-2">Cancelar</a>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
